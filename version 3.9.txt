root@devops-learn:/docker/nginx# nano docker-compose.yml
  GNU nano 7.2                                                                          docker-compose.yml
version: "3.9"

services:
  nginx:
    image: nginx
    container_name: main-nginx
    volumes:
      - ./default.conf:/etc/nginx/conf.d/default.conf
      - ./www:/var/www:rw
    ports:
      - 80:80
      - 443:443
    depends_on:
      - certbot

  certbot:
    image: nginx
    container_name: certbot
    volumes:
      - ./default.conf:/etc/letsencrypt/options-ssl-nginx.conf
      - ./cert:/etc/letsencrypt/live/shaiyrbek.net.kg
      - ./creds.ini:/var/creds.ini
    command: sh -c "apt -y update && apt -y install certbot && apt -y install python3-certbot-dns-digitalocean && certbot certonly --agree-tos --dns-digitalocean --dns-digitalocean-credentials /var/creds.ini --non-interactive -m baktybek.uulu.shaiyrbek@gmail.com -d shaiyrbek.net.kg"

    ports:
      - 81:81

networks:
  default:
    name: docker-net
